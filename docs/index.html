<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>坦克世界汉化安装器</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="icon" href="static/app_icon.ico" />
  <style>
    #qq-sidebar::before {
      content: '';
      position: absolute;
      top: 50%;
      left: -10px;
      width: 10px;
      height: 60px;
      background: rgba(255,255,255,0.2);
      border-radius: 0 4px 4px 0;
      transform: translateY(-50%);
    }
  </style>
</head>
<body class="bg-gray-900 text-white font-sans leading-relaxed tracking-wide relative overflow-x-hidden">

  <!-- 顶部 -->
  <header class="text-center py-10 bg-gradient-to-br from-indigo-800 via-blue-900 to-gray-900 shadow-2xl backdrop-blur-sm">
    <h1 class="text-4xl font-bold text-white drop-shadow-md">坦克世界汉化安装程序 v2.1</h1>
    <p class="mt-3 text-gray-300 text-lg">适用于 Lesta(俄服) 服务器，打造纯净汉化体验</p>
  </header>

  <main class="max-w-4xl mx-auto p-6 space-y-12">
    <!-- 功能介绍 -->
    <section>
      <h2 class="text-xl font-semibold border-b border-gray-600 pb-2">🛠 功能介绍</h2>
      <ul class="list-disc list-inside mt-3 text-gray-300 space-y-1">
        <li>自动识别《坦克世界》目录，简化安装流程</li>
        <li>DeepSeek-V3 模型加持</li>
        <li>支持多服版本（RU/正式服、PT/测试服）</li>
        <li>在线下载汉化补丁</li>
        <li>完整性校验安装，安全可靠</li>
        <li>提供卸载辅助功能</li>
      </ul>
    </section>

    <!-- 下载 -->
    <section>
      <h2 class="text-xl font-semibold border-b border-gray-600 pb-2">📥 下载程序</h2>
      <p class="text-gray-400 mt-2">仅支持 Windows 系统，下载后直接运行，无需安装</p>
      <div class="grid sm:grid-cols-2 gap-6 mt-4">
        <a href="https://dl.onlyax.com/坦克世界莱服汉化安装器_2_1_signed.exe" download
           class="bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 
           text-white text-center py-3 rounded-md font-semibold shadow-lg transform hover:scale-105 transition-all">
          Windows 8 / 10 / 11 下载
        </a>
        <a href="https://dl.onlyax.com/坦克世界莱服汉化安装器_2_1_signed_win7.exe" download
           class="bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 
           text-white text-center py-3 rounded-md font-semibold shadow-lg transform hover:scale-105 transition-all">
          Windows 7 下载
        </a>
      </div>
    </section>

    <!-- 教学视频 -->
    <section>
      <h2 class="text-xl font-semibold border-b border-gray-600 pb-2">🎥 教学视频</h2>
      <p class="text-gray-400 mt-2">首次使用？点击下方链接观看完整教学 「感谢老椰子同志的大力支持!」</p>
      👉<a href="https://b23.tv/Bs8i1cP" target="_blank" class="text-blue-400 underline hover:text-blue-200">
        点此查看教学视频
      </a>
    </section>

    <!-- 支持 -->
    <section>
      <h2 class="text-xl font-semibold border-b border-gray-600 pb-2">💖 支持作者</h2>
      <p class="text-gray-400 mt-2">觉得好用？欢迎投喂，支持持续开发！</p>
      <div class="flex flex-col sm:flex-row justify-center items-center gap-8 mt-4">
        <div class="text-center transform transition-transform duration-300 hover:scale-110">
          <img src="static/wechat_qr.jpg" alt="微信赞助"
               class="w-44 max-h-60 object-contain rounded-md shadow-md" />
          <p class="mt-2 text-sm">微信</p>
        </div>
        <div class="text-center transform transition-transform duration-300 hover:scale-110">
          <img src="static/alipay_qr.jpg" alt="支付宝赞助"
               class="w-44 max-h-60 object-contain rounded-md shadow-md" />
          <p class="mt-2 text-sm">支付宝</p>
        </div>
      </div>

      <!-- 招募支持按钮 -->
      <div class="mt-6 text-center">
        <a href="https://tanki.su/referral/e4b86462996c4a1d9ba9c8dfd02bfe79" target="_blank"
           class="inline-block bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 
           text-white text-lg font-semibold py-3 px-6 rounded-md shadow-lg transform hover:scale-105 transition-all">
          🎯 点击加入招募，支持作者！
        </a>
        <p class="mt-2 text-sm text-gray-400">通过该链接注册账号，您在游戏中的氪金将给予作者游戏内返金</p>
      </div>
    </section>

    <!-- 更新日志 -->
    <section id="changelog">
      <h2 class="text-xl font-semibold border-b border-gray-600 pb-2 mt-12">📝 更新日志</h2>
      <ul class="mt-4 space-y-2 text-gray-300 text-sm list-disc list-inside">
        <li><strong>v2.1</strong> - 2025/06/17
          <ul class="ml-5 list-disc list-inside">
            <li>下载优化：添加阿里云源(感谢妙妙盒北极佬的支持!)</li>
            <li>界面优化：控件对齐、控件组视觉分区、整体观感升级</li>
            <li>支持下载进度实时展示（百分比 + 下载速度）</li>
            <li>程序启动自动检测新版本，提示前往官网更新</li>
          </ul>
        </li>
        <li><strong>v2.0</strong> - 2025/06/11：首次公开发布</li>
      </ul>
    </section>

  </main>

  <footer class="text-center py-6 text-sm text-gray-500">
    Designed by @Allen | 汉化项目非商业用途，仅供学习与交流
  </footer>

  <!-- QQ 群按钮 -->
  <div id="qq-toggle" class="fixed bottom-6 right-6 z-50 flex flex-col gap-3 items-end">
    <!-- 妙妙盒安装 -->
    <a href="https://goover.cn" target="_blank"
       class="w-40 text-center bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700
              text-white text-sm font-semibold py-2 px-4 rounded-full shadow-lg transform hover:scale-105 transition-all">
      📦 妙妙盒下载
    </a>
  
    <!-- 来找组织 -->
    <button onclick="toggleSidebar()" 
            class="w-40 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700
                   text-white text-sm font-semibold py-2 px-4 rounded-full shadow-lg transform hover:scale-105 transition-all">
      🚀 来找组织！
    </button>
  
    <!-- 返回顶部 -->
    <button onclick="window.scrollTo({ top: 0, behavior: 'smooth' });"
            class="w-40 bg-gradient-to-r from-gray-600 to-gray-800 hover:from-gray-700 hover:to-gray-900
                   text-white text-sm font-semibold py-2 px-4 rounded-full shadow-lg transform hover:scale-105 transition-all">
      ⬆️ 返回顶部
    </button>
  </div>


  <!-- QQ 群侧边栏 -->
  <div id="qq-sidebar"
       class="fixed top-0 right-0 w-80 h-full bg-gray-900 shadow-lg transform translate-x-full transition-transform duration-500 ease-in-out z-40 p-6 overflow-y-auto touch-pan-y">
    <h2 class="text-xl font-semibold text-white border-b border-gray-600 pb-2 mb-4">
      💬 一起加入坦克交流群，获取更新与支持！
    </h2>

    <!-- 群 1 -->
    <div class="bg-gradient-to-br from-gray-700 via-gray-800 to-gray-900 border border-gray-600 rounded-lg p-4 mb-4 shadow-md">
      <p class="text-lg font-semibold text-white mb-2">主群：交流讨论</p>
      <div class="text-blue-400 cursor-pointer mb-2 copy-btn" data-qq="879991141">
        QQ 群号：<span class="copy-text">879991141（点击复制）</span>
      </div>
      <img src="/static/qrcode_1.png" alt="QQ群二维码1"
           class="mx-auto w-32 rounded-md shadow cursor-pointer"
           onclick="showQrModal(this.src)" />
    </div>

    <!-- 群 2 -->
    <div class="bg-gradient-to-br from-gray-700 via-gray-800 to-gray-900 border border-gray-600 rounded-lg p-4 shadow-md">
      <p class="text-lg font-semibold text-white mb-2">二群：资源分发</p>
      <div class="text-blue-400 cursor-pointer mb-2 copy-btn" data-qq="868321488">
        QQ 群号：<span class="copy-text">868321488（点击复制）</span>
      </div>
      <img src="/static/qrcode_2.png" alt="QQ群二维码2"
           class="mx-auto w-32 rounded-md shadow cursor-pointer"
           onclick="showQrModal(this.src)" />
    </div>
  </div>

  <!-- 二维码放大预览模态框 -->
  <div id="qr-modal"
       class="fixed inset-0 z-[9999] bg-black bg-opacity-70 hidden items-center justify-center p-4"
       onclick="hideQrModal()">
    <img id="qr-modal-img" src="" alt="预览二维码"
         class="max-w-full max-h-full rounded-lg shadow-lg border-4 border-white"
         onclick="event.stopPropagation()" />
    <button onclick="hideQrModal()" class="absolute top-4 right-4 text-white text-2xl font-bold">✖</button>
  </div>

  <!-- JavaScript -->
  <script>
    function toggleSidebar(show = null) {
      const sidebar = document.getElementById("qq-sidebar");
      const isOpen = !sidebar.classList.contains("translate-x-full");
      if (show === null) {
        sidebar.classList.toggle("translate-x-full");
      } else {
        sidebar.classList.toggle("translate-x-full", !show);
      }
    }

    function showQrModal(src) {
      const modal = document.getElementById('qr-modal');
      const img = document.getElementById('qr-modal-img');
      img.src = src;
      modal.classList.remove('hidden');
      modal.classList.add('flex');
    }

    function hideQrModal() {
      const modal = document.getElementById('qr-modal');
      modal.classList.remove('flex');
      modal.classList.add('hidden');
    }

    document.addEventListener("DOMContentLoaded", () => {
      // QQ 群号复制
      document.querySelectorAll(".copy-btn").forEach(btn => {
        btn.addEventListener("click", () => {
          const qq = btn.dataset.qq;
          navigator.clipboard.writeText(qq).then(() => {
            const textSpan = btn.querySelector(".copy-text");
            const original = textSpan.textContent;
            textSpan.textContent = "✅ 已复制";
            setTimeout(() => {
              textSpan.textContent = original;
            }, 2000);
          });
        });
      });

      // 手势关闭 sidebar
      let startX = null;
      const sidebar = document.getElementById("qq-sidebar");
      sidebar.addEventListener("touchstart", e => startX = e.touches[0].clientX);
      sidebar.addEventListener("touchend", e => {
        if (startX !== null && e.changedTouches[0].clientX - startX > 80) {
          toggleSidebar(false);
          startX = null;
        }
      });

      // 点击空白区域关闭 sidebar
      document.addEventListener("click", (e) => {
        const toggle = document.getElementById("qq-toggle");
        const sidebar = document.getElementById("qq-sidebar");
        const isOpen = !sidebar.classList.contains("translate-x-full");
        if (!isOpen) return;
        if (sidebar.contains(e.target) || toggle.contains(e.target)) return;
        toggleSidebar(false);
      });
    });
  </script>
</body>
</html>
